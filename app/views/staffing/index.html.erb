<div class="container-fluid" id="staffing_form">
  <div class="pantalla-seccion d-flex justify-content-between mb-2">
    <div class="align-self-end">
      <div class="titulo-pantalla">Dotación de personal actual</div>
    </div>        
  </div>
  
  <div class="sub-titulo-pantalla">Parámetros</div>
  <div>
    <%= simple_form_for @search, :url => staffing_index_path, :method => :get do |f| %>
    <div class="d-flex flex-wrap justify-content-end bd-highlight" id="sales_search_form">
      <div class="input-form">
        <%= f.input :store, collection: @stores, label: 'Tienda', wrapper: :select2, selected: params[:store] , label: false%>  
      </div>

      <div class="input-form">
        <%= f.input :department, collection: @departments, label: 'Departamento', wrapper: :select2,selected: params[:department] , label: false %>  
      </div>
      <div class="input-form">
      <%= f.input :month, collection: (1..9).map {|m| [I18n.l(DateTime.parse(Date::MONTHNAMES[m]), format: "%B").capitalize, m]}, label: 'Mes', wrapper: :select2, selected: @month , label: false %>  
      </div>
      <div class="boton-buscar">
        <%= button_tag type: 'submit', class: "btn btn-success" do %>
        <i class="fa fa-search" aria-hidden="true"></i> Buscar
        <% end %>
      </div>  
    </div>
    <% end %>
  </div>
  <div class="formulario-comparacion">
    <div class="sub-titulo-pantalla">Resultado de búsqueda</div>
    <div>
      <span class="label label-success tip" data-toggle="tooltip">Actual</span>
    </div>
    <div class="row">
      <div class="col-xl-6 col-sm-12">
            <table class="table-shift table table-striped">
              <thead>
                <tr>
                  <th colspan="8" class="text-center">Semana 1</th>
                </tr>
                <tr>
                  <th class="text-center">Hora</th>
                  <th class="text-center">L</th>
                  <th class="text-center">M</th>
                  <th class="text-center">M</th>
                  <th class="text-center">J</th>
                  <th class="text-center">V</th>
                  <th class="text-center">S</th>
                  <th class="text-center">D</th>  
                </tr>
                <tr>
                    <th class="text-center"> </th>
                  <% @staffing_w1[:dates].each do |d| %>
                    <th class="text-center"> <%= d.to_date.strftime("%d") %></th>
                  <% end -%>
                </tr>
              </thead>
              <tbody class="t-p-3">
                <% @staffing_w1[:draw].each do |k,v|%>
                <tr>
                  <% if k != :"9"  && k != :"10"  &&  k != :"21" &&  k != :"22" &&  k != :"23" &&  k != :"24" %>
                  <td class="text-center" align="center"><%= k %>:00</td>
                  <% v.first.each do |n| %>
                    <% if n != 0 %>
                    <td class="text-center">
                      <% data_names = "" %>
                      <% n[:sellers].map { |e| data_names += "#{e}<br>" } %>
                      <span class="label label-success tip" data-toggle="tooltip" data-original-title="<%=  data_names %>"><%= n[:hours] %></span>
                    </td>  
                    <% else %>
                    <td>  </td>
                    <% end -%>
                  <% end -%>
                  <% end -%>
                </tr>
                <% end -%>
              </tbody>
            </table>
      </div>


      <div class="col-xl-6 col-sm-12">
            <table class="table-shift table table-striped">
              <thead>
                <tr>
                  <th colspan="8" class="text-center">Semana 2</th>
                </tr>
                <tr>
                  <th class="text-center">Hora</th>
                  <th class="text-center">L</th>
                  <th class="text-center">M</th>
                  <th class="text-center">M</th>
                  <th class="text-center">J</th>
                  <th class="text-center">V</th>
                  <th class="text-center">S</th>
                  <th class="text-center">D</th>  
                </tr>
                <tr>
                    <th class="text-center"> </th>
                  <% @staffing_w2[:dates].each do |d| %>
                    <th class="text-center"> <%= d.to_date.strftime("%d") %></th>
                  <% end -%>
                </tr>
              </thead>
              <tbody class="t-p-3">
                <% @staffing_w2[:draw].each do |k,v|%>
                <tr>
                  <% if k != :"9"  && k != :"10"  &&  k != :"21" &&  k != :"22" &&  k != :"23" &&  k != :"24" %>
                  <td class="text-center" align="center"><%= k %>:00</td>
                  <% 
                  v.first.each do |n| %>
                    <% if n != 0 %>
                    <td class="text-center">
                      <% data_names = "" %>
                      <% n[:sellers].map { |e| data_names += "#{e}<br>" } %>
                      <span class="label label-success tip" data-toggle="tooltip" data-original-title="<%=  data_names %>"><%= n[:hours] %></span>
                    </td>  
                    <% else %>
                    <td>  </td>
                    <% end -%>
                  <% end -%>
                  <% end -%>
                </tr>
                <% end -%>
              </tbody>
            </table>
      </div>              

      <div class="col-xl-6 col-sm-12">
            <table class="table-shift table table-striped">
              <thead>
                <tr>
                  <th colspan="8" class="text-center">Semana 3</th>
                </tr>
                <tr>
                  <th class="text-center">Hora</th>
                  <th class="text-center">L</th>
                  <th class="text-center">M</th>
                  <th class="text-center">M</th>
                  <th class="text-center">J</th>
                  <th class="text-center">V</th>
                  <th class="text-center">S</th>
                  <th class="text-center">D</th>  
                </tr>
                <tr>
                    <th class="text-center"> </th>
                  <% @staffing_w3[:dates].each do |d| %>
                    <th class="text-center"> <%= d.to_date.strftime("%d") %></th>
                  <% end -%>
                </tr>
              </thead>
              <tbody class="t-p-3">
                <% @staffing_w3[:draw].each do |k,v|%>
                <tr>
                  <% if k != :"9"  && k != :"10"  &&  k != :"21" &&  k != :"22" &&  k != :"23" &&  k != :"24" %>
                  <td class="text-center" align="center"><%= k %>:00</td>
                  <% 
                  v.first.each do |n| %>
                    <% if n != 0 %>
                    <td class="text-center">
                      <% data_names = "" %>
                      <% n[:sellers].map { |e| data_names += "#{e}<br>" } %>
                      <span class="label label-success tip" data-toggle="tooltip" data-original-title="<%=  data_names %>"><%= n[:hours] %></span>
                    </td>  
                    <% else %>
                    <td>  </td>
                    <% end -%>
                  <% end -%>
                  <% end -%>
                </tr>
                <% end -%>
              </tbody>
            </table>
      </div>              

      <div class="col-xl-6 col-sm-12">
            <table class="table-shift table table-striped">
              <thead>
                <tr>
                  <th colspan="8" class="text-center">Semana 4</th>
                </tr>
                <tr>
                  <th class="text-center">Hora</th>
                  <th class="text-center">L</th>
                  <th class="text-center">M</th>
                  <th class="text-center">M</th>
                  <th class="text-center">J</th>
                  <th class="text-center">V</th>
                  <th class="text-center">S</th>
                  <th class="text-center">D</th>  
                </tr>
                <tr>
                    <th class="text-center"> </th>
                  <% @staffing_w4[:dates].each do |d| %>
                    <th class="text-center"> <%= d.to_date.strftime("%d") %></th>
                  <% end -%>
                </tr>
              </thead>
              <tbody class="t-p-3">
                <% @staffing_w4[:draw].each do |k,v|%>
                <tr>
                  <% if k != :"9"  && k != :"10"  &&  k != :"21" &&  k != :"22" &&  k != :"23" &&  k != :"24" %>
                  <td class="text-center" align="center"><%= k %>:00</td>
                  <% 
                  v.first.each do |n| %>
                    <% if n != 0 %>
                    <td class="text-center">
                      <% data_names = "" %>
                      <% n[:sellers].map { |e| data_names += "#{e}<br>" } %>
                      <span class="label label-success tip" data-toggle="tooltip" data-original-title="<%=  data_names %>"><%= n[:hours] %></span>
                    </td>  
                    <% else %>
                    <td>  </td>
                    <% end -%>
                  <% end -%>
                  <% end -%>
                </tr>
                <% end -%>
              </tbody>
            </table>
      </div>                    
    </div>
  </div>
</div>


