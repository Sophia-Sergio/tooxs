class Settings < Settingslogic
  source "#{Rails.root}/config/application.yml"
  namespace Rails.env

  STORE_ALLOWED = 'Alto Las Condes'
  STORES_ALLOWED = ['Alto Las Condes'].freeze
  DEPARTMENTS_ALLOWED = [
    'Accesorios Mujer',
    'Electrodomésticos',
    'Audio y Video',
    'Alfombras y Maletas',
    'Gourmet',
    'Blanco',
    'Juguetería']
  DEMO_DEPARTMENTS = YAML.load_file("#{Rails.root}/config/demo_departments.yml")
  YEARS = [2017, 2018, 2019].freeze

  def productivity_periods_keys
    [
      '10 - 11',
      '11 - 12',
      '12 - 13',
      '13 - 14',
      '14 - 15',
      '15 - 16',
      '16 - 17',
      '17 - 18',
      '18 - 19',
      '19 - 20',
      '20 - 21'
    ]
  end

  def productivity_week_periods_keys
    {
      'monday_friday_am': ['10 - 11', '11 - 12', '12 - 13'],
      'monday_friday_pm': ['13 - 14', '14 - 15', '15 - 16', '16 - 17','17 - 18',
                           '18 - 19', '19 - 20', '20 - 21'],
      'saturday_sunday_am': ['10 - 11', '11 - 12', '12 - 13'],
      'saturday_sunday_pm': ['13 - 14', '14 - 15', '15 - 16', '16 - 17', '17 - 18', '18 - 19',
                             '19 - 20', '20 - 21']
    }.with_indifferent_access
  end

  def weeks_by_month
    {
      1 => 4,
      2 => 4,
      3 => 4,
      4 => 5,
      5 => 4,
      6 => 4,
      7 => 5,
      8 => 4,
      9 => 4,
      10 => 5,
      11 => 4,
      12 => 5
    }
  end

  def days_by_month(year)
    february = (year % 4).zero? ? 29 : 28
    {
      1 => 31,
      2 => february,
      3 => 31,
      4 => 30,
      5 => 31,
      6 => 30,
      7 => 31,
      8 => 31,
      9 => 30,
      10 => 31,
      11 => 30,
      12 => 31
    }
  end

  def sale_rates_by_month
    {
      1 => 7.1,
      2 => 7.5,
      3 => 6.9,
      4 => 8.0,
      5 => 7.9,
      6 => 7.4,
      7 => 8.4,
      8 => 7.6,
      9 => 6.9,
      10 => 7.7,
      11 => 8.0,
      12 => 16.5
    }
  end

  def period_labels(period)
    (period[:start]..period[:end]).map { |date| "#{date.day}-#{date.strftime('%m')}" }
  end

  ## demo data
  def day_rate(week_sales, day, sellers)
    random_rates = (1..10).map do |hour|
      random_rate = rand(0.42..0.48) if (1..5).cover? day
      random_rate = rand(0.93..1.74) if (6..7).cover? day
      random_rate *= rand(1.1..1.3) if (6..9).cover?(hour) && (1..5).cover?(day)
      random_rate *= rand(2.1..2.3) if (6..9).cover?(hour) && (6..7).cover?(day)
      random_rate *= rand(1.15..1.38) if hour == 10
      random_rate.round(2)
    end
    sellers = 1 if sellers.zero?
    periods_keys.zip(random_rates.map { |rate| ((week_sales * (rate / 100)) / sellers ).round }).to_h
  end

  def sales_proportions_week
    [
      {
        '10 - 11' => 0.0215633423,
        '11 - 12' => 0.0215633423,
        '12 - 13' => 0.055705301,
        '13 - 14' => 0.0862533693,
        '14 - 15' => 0.0727762803,
        '15 - 16' => 0.0682839173,
        '16 - 17' => 0.0988319856,
        '17 - 18' => 0.1284815813,
        '18 - 19' => 0.1931716083,
        '19 - 20' => 0.1500449236,
        '20 - 21' => 0.1033243486
      },
      {
        '10 - 11' => 0.0215633423,
        '11 - 12' => 0.0215633423,
        '12 - 13' => 0.055705301,
        '13 - 14' => 0.0862533693,
        '14 - 15' => 0.0727762803,
        '15 - 16' => 0.0682839173,
        '16 - 17' => 0.0988319856,
        '17 - 18' => 0.1284815813,
        '18 - 19' => 0.1931716083,
        '19 - 20' => 0.1500449236,
        '20 - 21' => 0.1033243486
      },
      {
        '10 - 11' => 0.0215633423,
        '11 - 12' => 0.0215633423,
        '12 - 13' => 0.055705301,
        '13 - 14' => 0.0862533693,
        '14 - 15' => 0.0727762803,
        '15 - 16' => 0.0682839173,
        '16 - 17' => 0.0988319856,
        '17 - 18' => 0.1284815813,
        '18 - 19' => 0.1931716083,
        '19 - 20' => 0.1500449236,
        '20 - 21' => 0.1033243486
      },
      {
        '10 - 11' => 0.0215633423,
        '11 - 12' => 0.0215633423,
        '12 - 13' => 0.055705301,
        '13 - 14' => 0.0862533693,
        '14 - 15' => 0.0727762803,
        '15 - 16' => 0.0682839173,
        '16 - 17' => 0.0988319856,
        '17 - 18' => 0.1284815813,
        '18 - 19' => 0.1931716083,
        '19 - 20' => 0.1500449236,
        '20 - 21' => 0.1033243486
      },
      {
        '10 - 11' => 0.0215633423,
        '11 - 12' => 0.0215633423,
        '12 - 13' => 0.055705301,
        '13 - 14' => 0.0862533693,
        '14 - 15' => 0.0727762803,
        '15 - 16' => 0.0682839173,
        '16 - 17' => 0.0988319856,
        '17 - 18' => 0.1284815813,
        '18 - 19' => 0.1931716083,
        '19 - 20' => 0.1500449236,
        '20 - 21' => 0.1033243486
      },
      {
        '10 - 11' => 0.0160812526,
        '11 - 12' => 0.0160812526,
        '12 - 13' => 0.0567075751,
        '13 - 14' => 0.0723656369,
        '14 - 15' => 0.06898011,
        '15 - 16' => 0.0550148117,
        '16 - 17' => 0.1011426153,
        '17 - 18' => 0.1388066018,
        '18 - 19' => 0.1718154888,
        '19 - 20' => 0.1917054592,
        '20 - 21' => 0.1112991959
      },
      {
        '10 - 11' => 0.0139557267,
        '11 - 12' => 0.0182868142,
        '12 - 13' => 0.0553416747,
        '13 - 14' => 0.0688161694,
        '14 - 15' => 0.0736284889,
        '15 - 16' => 0.0644850818,
        '16 - 17' => 0.0774783446,
        '17 - 18' => 0.1515880654,
        '18 - 19' => 0.1852743022,
        '19 - 20' => 0.1992300289,
        '20 - 21' => 0.0919153032
      }
    ]
  end
end
